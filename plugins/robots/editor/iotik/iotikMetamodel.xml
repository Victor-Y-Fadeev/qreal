<?xml version="1.0" encoding="utf-8"?>
<metamodel xmlns="http://schema.real.com/schema/">
	<extends>../common/robotsMetamodel.xml</extends>
	<namespace>UML 2.0</namespace>
	<diagram name="RobotsDiagram">
		<nonGraphicTypes>
			<enum name="IotikDigitalSensorPort">
				<value name="D1"/>
			</enum>
			<enum name="IotikAnalogSensorPort">
				<value name="A1"/>
			</enum>
		</nonGraphicTypes>
		<graphicTypes>
			<!-- Algorithms -->
			<node name="IotikEngineMovementCommand">
				<logic>
					<container/>
					<properties>
						<property displayedName="Ports" type="string" name="Ports" >
							<default>M1, M2</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="EngineMovementCommand"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Motors Backward" name="IotikEnginesBackward" path="111, 224 : 0, 113 :  | 113, 0 : 0, 113 :  | 0, 113 : 287, 113 : " description="Enables motors on the given ports in reverse mode with the given power. Ports are specified in accordance with Iotik controller notations (for example M1, M2) and divided by commas. The power is specified in percents with the number from -100 to 100, if negative number is specified then the motor is enabled in the usual mode.">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/enginesBackwardBlock.png" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="25" y="-35" textBinded="Ports" hard="true" background="white" prefix="Ports:"/>
						<label x="35" y="60" textBinded="Power" background="white" prefix="Power:" suffix="%"/>
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<container/>
					<generalizations>
						<parent parentName="IotikEngineMovementCommand"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Motors Forward" name="IotikEnginesForward" path="185, 207 : 287, 105 :  | 287, 105 : 182, 0 :  | 0, 105 : 287, 105 : " description="Enables motors on the given ports with the given power. Ports are specified in accordance with Ioitk controller notations (for example M1, M2) and divided by commas. The power is specified in percents with the number from -100 to 100, if negative number is specified then the motor is enabled in the reverse mode.">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/enginesForwardBlock.png" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="25" y="-35" textBinded="Ports" hard="true" background="white" prefix="Ports:" />
						<label x="35" y="60" textBinded="Power" background="white" prefix="Power:" suffix="%" />
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<container/>
					<generalizations>
						<parent parentName="IotikEngineMovementCommand"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Stop Motors" name="IotikEnginesStop" path="49, 117 : 185, 117 :  | 223, 118 : 222, 128 : 221, 138 : 218, 148 : 215, 158 : 211, 167 : 205, 176 : 199, 184 : 192, 192 : 184, 199 : 176, 205 : 167, 211 : 158, 215 : 148, 218 : 138, 221 : 128, 222 : 118, 223 : 108, 222 : 98, 221 : 88, 218 : 78, 215 : 69, 211 : 60, 205 : 52, 199 : 44, 192 : 37, 184 : 31, 176 : 25, 167 : 21, 158 : 18, 148 : 15, 138 : 14, 128 : 13, 118 : 14, 108 : 15, 98 : 18, 88 : 21, 78 : 25, 69 : 31, 60 : 37, 52 : 44, 44 : 52, 37 : 60, 31 : 69, 25 : 78, 21 : 88, 18 : 98, 15 : 108, 14 : 118, 13 : 128, 14 : 138, 15 : 148, 18 : 158, 21 : 167, 25 : 176, 31 : 184, 37 : 192, 44 : 199, 52 : 205, 60 : 211, 69 : 215, 78 : 218, 88 : 221, 98 : 222, 108 : 223, 118 : " description="Disables motors on the given ports.">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/enginesStopBlock.png" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="25" y="-35" textBinded="Ports" hard="true" background="white" prefix="Ports:"/>
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<container/>
					<generalizations>
						<parent parentName="EngineCommand"/>
					</generalizations>
					<properties>
						<property displayedName="Ports" type="string" name="Ports">
							<default>M1, M2</default>
						</property>
					</properties>
				</logic>
			</node>
			<!-- Waiting for sensors blocks -->
			<node name="IotikSensorBlock">
				<logic>
					<container/>
					<properties/>
					<generalizations>
						<parent parentName="AbstractNode"/>
					</generalizations>
				</logic>
			</node>
			<node name="IotikAnalogSensorBlock">
				<logic>
					<container/>
					<properties>
						<property displayedName="Port" type="IotikAnalogSensorPort" name="Port">
							<default>A1</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="IotikSensorBlock"/>
					</generalizations>
				</logic>
			</node>
			<node name="IotikDigitalSensorBlock">
				<logic>
					<container/>
					<properties>
						<property displayedName="Port" type="IotikDigitalSensorPort" name="Port">
							<default>D1</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="IotikSensorBlock"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Wait for Ultrasonic Distance" name="IotikWaitForSonarDistance" description="Waits till the value returned by the ultrasonic sensor on the given port will be greater or less than the given in the 'Distance' parameter value (the distance is specified in centimeters, from 0 to 300).">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/waitForSonarDistanceBlock.png" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="40" y="-35" textBinded="Port" hard="true" prefix="Port:"/>
						<label x="55" y="60" textBinded="Distance" prefix="Distance:"/>
						<label x="55" y="90" textBinded="Sign" prefix="Sign:"/>
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<container/>
					<properties>
						<property displayedName="Distance" type="string" name="Distance">
							<default>0</default>
						</property>
						<property displayedName="Sign" type="DistanceSign" name="Sign">
							<default>greater</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="IotikDigitalSensorBlock"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Wait for Infrared Distance" name="IotikWaitForIRDistance" path="190, 162 : 219, 122 :  | 219, 122 : 190, 86 :  | 120, 122 : 219, 122 :  | 12, 118 : 118, 12 :  | 12, 118 : 118, 224 :  | 118, 12 : 118, 224 : " description="Waits till the value returned by the infrared sensor on the given port will be greater or less than the given in the 'Distance' parameter value. By default on ports A1 and A2 the distance is specified in centimeters (from 0 to 100). It is not recommended to plug IR sensor into other ports because its raw value will be processed by software on robot with expectation of another sensor type.">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/waitForSonarDistanceBlock.png" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="40" y="-35" textBinded="Port" hard="true" prefix="Port:"/>
						<label x="55" y="60" textBinded="Distance" prefix="Distance:"/>
						<label x="55" y="90" textBinded="Sign" prefix="Sign:"/>
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<container/>
					<properties>
						<property displayedName="Distance" type="string" name="Distance">
							<default>0</default>
						</property>
						<property displayedName="Sign" type="DistanceSign" name="Sign">
							<default>greater</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="IotikAnalogSensorBlock"/>
					</generalizations>
				</logic>
			</node>
			<node displayedName="Line Detector into Variable" name="IotikDetectorToVariable" description="Stores videocamera line detector`s value into a given variable.">
				<graphics>
					<picture sizex="50" sizey="50">
						<image y1="0" name="images/lineDetectorIntoVariableBlock.svg" x1="0" y2="50" x2="50"/>
					</picture>
					<labels>
						<label x="40" y="-35" textBinded="Port" hard="true" prefix="Port:"/>
						<label x="-50" y="60" text="Line Detector into Variable" background="white"/>
						<label x="40" y="90" textBinded="Variable" background="white" prefix="Variable:"/>
					</labels>
					<nonResizeable/>
				</graphics>
				<logic>
					<properties>
						<property displayedName="Variable" type="string" name="Variable">
							<default>err</default>
						</property>
					</properties>
					<generalizations>
						<parent parentName="IotikAnalogSensorBlock"/>
					</generalizations>
				</logic>
			</node>
		</graphicTypes>
		<palette sorted="false">
			<group name="Actions">
				<element name="IotikEnginesForward"/>
				<element name="IotikEnginesBackward"/>
				<element name="IotikEnginesStop"/>
				<element name="IotikDetectorToVariable" />
			</group>
			<group name="Wait">
				<element name="IotikWaitForIRDistance"/>
				<element name="IotikWaitForSonarDistance" />
			</group>
		</palette>
	</diagram>
</metamodel>
